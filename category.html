<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Products</title>
    <link rel="stylesheet" href="styles.css"> <!-- Your CSS file -->
</head>
<body>

    <h2 id="category-title"></h2>
    <div id="products" class="product-container"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Get category from URL
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get("category");

            document.getElementById("category-title").innerText = category + " Products";

            // Fetch products of that category from server
            fetch(`http://localhost:3000/products?category=${category}`)
                .then(response => response.json())
                .then(data => {
                    let container = document.getElementById("products");
                    container.innerHTML = ""; // Clear previous content

                    if (data.length === 0) {
                        container.innerHTML = `<p>No products found in this category.</p>`;
                        return;
                    }

                    data.forEach(product => {
                        let productDiv = document.createElement("div");
                        productDiv.classList.add("product");

                        productDiv.innerHTML = `
                            <a href="product.html?id=${product.id}">
                                <img src="data:image/jpeg;base64,${product.image}" alt="${product.name}">
                            </a>
                            <h3>${product.name}</h3>
                            <p><strong>$${product.price}.00</strong> / ${product.unit}</p>
                            <p>${product.stock} Available</p>
                            <button class="add-to-cart">ðŸ›’ Add To Cart</button>
                        `;
                        container.appendChild(productDiv);
                    });
                })
                .catch(error => console.error("Error fetching products:", error));
        });
    </script>

</body>
</html>
